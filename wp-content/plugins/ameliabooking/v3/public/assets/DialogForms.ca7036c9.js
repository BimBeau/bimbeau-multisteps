import{A as k,H as u,c$ as $,s as i,D as d,G as B,x as R,a5 as W,m as f,a4 as A,e as w,w as M,b as l,aa as S,am as H,l as D,E as y,o as x,ae as L}from"./stepForm.a8547537.js";import{d as N}from"./catalogForm.ed760f13.js";import{v as P}from"./eventListForm.eeff4493.js";import T from"./eventCalendarForm.f1f5414b.js";const j={name:"AmeliaDialogForms"},q=Object.assign(j,{setup(F){let e=D("shortcodeData"),b=k({sbsNew:u($),cbf:u(N),elf:u(P),ecf:u(T)}),n=i(0);d("dialogWrapperWidth",n);let a=i(!1);d("formDialogVisibility",a);let m=i(!1),g=e.value.trigger_type&&e.value.trigger_type==="class"?[...document.getElementsByClassName(e.value.trigger)]:[document.getElementById(e.value.trigger)];function E(s){m.value=s}let v=i(100),p=i(0);d("loadDialogCounter",p),g.forEach(s=>{s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),a.value=!0,m.value||p.value++,setTimeout(()=>{window.dispatchEvent(new Event("resize"))},v.value)})}),B(m,s=>{s&&g.forEach(o=>{o.dispatchEvent(new Event("click"))})});function z(){a.value=!1}let c=i(0);function _(){c.value=window.visualViewport.height}window.addEventListener("resize",_),R(()=>{W("renderPopup",{resizeAfter:v}),_()});const r=D("settings");let t=f(()=>r.customizedData&&e.value.triggered_form in r.customizedData?r.customizedData[e.value.triggered_form].colors:y[e.value.triggered_form].colors),V=f(()=>r.customizedData&&e.value.triggered_form in r.customizedData?r.customizedData[e.value.triggered_form]:y[e.value.triggered_form]),C=f(()=>({"--am-c-primary":t.value.colorPrimary,"--am-c-success":t.value.colorSuccess,"--am-c-error":t.value.colorError,"--am-c-warning":t.value.colorWarning,"--am-c-main-bgr":t.value.colorMainBgr,"--am-c-main-heading-text":t.value.colorMainHeadingText,"--am-c-main-text":t.value.colorMainText,"--am-dvh":c.value?`${c.value}px`:"100dvh"}));return A(()=>{e.value.triggered_form==="sbsNew"&&(n.value=V.value.sidebar.options.self.visibility?"760px":"520px"),e.value.triggered_form==="cbf"&&(n.value="1140px"),e.value.triggered_form==="elf"&&(n.value="792px")},{flush:"post"}),(s,o)=>(x(),w(H,{modelValue:l(a),"onUpdate:modelValue":o[0]||(o[0]=h=>S(a)?a.value=h:a=h),"append-to-body":!0,"modal-class":`amelia-v2-booking am-forms-dialog am-${l(e).triggered_form}`,"close-on-click-modal":!1,"close-on-press-escape":!1,"custom-styles":l(C),"used-for-shortcode":!0,width:l(n),onClosed:z},{default:M(()=>[(x(),w(L(l(b)[l(e).triggered_form]),{onIsRestored:E}))]),_:1},8,["modelValue","modal-class","custom-styles","width"]))}});export{q as default};
